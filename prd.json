{
  "project": "NowThenNext",
  "branchName": "ralph/code-behind-migration",
  "description": "Migrate remaining 5 Razor files with inline @code blocks to use code-behind (.razor.cs) files for separation of concerns",
  "userStories": [
    {
      "id": "US-055",
      "title": "Migrate PhonicsCard.razor to code-behind",
      "description": "As a developer, I want PhonicsCard.razor to use a code-behind file so that C# logic is separated from markup.",
      "acceptanceCriteria": [
        "Create PhonicsCard.razor.cs as a partial class PhonicsCard (no ComponentBase inheritance needed - follow existing pattern in PlanDay.razor.cs)",
        "Move all fields, parameters, methods, and lifecycle overrides from the @code block into the code-behind file",
        "Move @inject directives to [Inject] private properties with = default! (e.g. [Inject] private NavigationManager Navigation { get; set; } = default!)",
        "Move @using directives to using statements in the code-behind (keep @using for types referenced only in markup, check _Imports.razor for already-global usings)",
        "Remove the @code { ... } block from PhonicsCard.razor",
        "Keep @page directive, <PageTitle>, HTML/Razor markup, and <style> block in PhonicsCard.razor",
        "Build passes",
        "All 73 E2E tests pass (dotnet test tests/NowThenNext.Tests.E2E)"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Largest @code block (~105 lines). Reference PlanDay.razor.cs for the exact code-behind pattern: file-scoped namespace NowThenNext.Pages, public partial class, [Inject] private properties with = default!"
    },
    {
      "id": "US-056",
      "title": "Migrate StorageWarningBanner.razor to code-behind",
      "description": "As a developer, I want StorageWarningBanner.razor to use a code-behind file so that C# logic is separated from markup.",
      "acceptanceCriteria": [
        "Create StorageWarningBanner.razor.cs as a partial class StorageWarningBanner in namespace NowThenNext.Components",
        "Move all fields, parameters, methods, and lifecycle overrides from the @code block into the code-behind file",
        "Move @inject directives to [Inject] private properties with = default!",
        "Move @using directives to using statements in the code-behind (keep @using for types referenced only in markup, check _Imports.razor for already-global usings)",
        "Remove the @code { ... } block from StorageWarningBanner.razor",
        "Keep HTML/Razor markup and <style> block in StorageWarningBanner.razor",
        "Build passes",
        "All 73 E2E tests pass (dotnet test tests/NowThenNext.Tests.E2E)"
      ],
      "priority": 2,
      "passes": false,
      "notes": "Component in Components/ directory - namespace is NowThenNext.Components. ~69 lines of @code."
    },
    {
      "id": "US-057",
      "title": "Migrate PhonicsSoundList.razor to code-behind",
      "description": "As a developer, I want PhonicsSoundList.razor to use a code-behind file so that C# logic is separated from markup.",
      "acceptanceCriteria": [
        "Create PhonicsSoundList.razor.cs as a partial class PhonicsSoundList in namespace NowThenNext.Pages",
        "Move all fields, parameters, methods, enums (CardState), and lifecycle overrides from the @code block into the code-behind file",
        "Move @inject directives to [Inject] private properties with = default!",
        "Move @using directives to using statements in the code-behind (keep @using for types referenced only in markup, check _Imports.razor for already-global usings)",
        "Remove the @code { ... } block from PhonicsSoundList.razor",
        "Keep @page directive, <PageTitle>, HTML/Razor markup, and <style> block in PhonicsSoundList.razor",
        "Build passes",
        "All 73 E2E tests pass (dotnet test tests/NowThenNext.Tests.E2E)"
      ],
      "priority": 3,
      "passes": false,
      "notes": "Contains a private enum CardState that must also move to the code-behind. ~68 lines of @code."
    },
    {
      "id": "US-058",
      "title": "Migrate PhonicsPhases.razor to code-behind",
      "description": "As a developer, I want PhonicsPhases.razor to use a code-behind file so that C# logic is separated from markup.",
      "acceptanceCriteria": [
        "Create PhonicsPhases.razor.cs as a partial class PhonicsPhases in namespace NowThenNext.Pages",
        "Move all fields, methods, and lifecycle overrides from the @code block into the code-behind file",
        "Move @inject directives to [Inject] private properties with = default!",
        "Move @using directives to using statements in the code-behind (keep @using for types referenced only in markup, check _Imports.razor for already-global usings)",
        "Remove the @code { ... } block from PhonicsPhases.razor",
        "Keep @page directive, <PageTitle>, HTML/Razor markup, and <style> block in PhonicsPhases.razor",
        "Build passes",
        "All 73 E2E tests pass (dotnet test tests/NowThenNext.Tests.E2E)"
      ],
      "priority": 4,
      "passes": false,
      "notes": "~42 lines of @code. PhaseProgress field is readonly Dictionary."
    },
    {
      "id": "US-059",
      "title": "Migrate ImageTile.razor to code-behind",
      "description": "As a developer, I want ImageTile.razor to use a code-behind file so that C# logic is separated from markup.",
      "acceptanceCriteria": [
        "Create ImageTile.razor.cs as a partial class ImageTile in namespace NowThenNext.Components",
        "Move all [Parameter] properties, EventCallback parameters, fields, and methods from the @code block into the code-behind file",
        "Move @using directives to using statements in the code-behind (check _Imports.razor for already-global usings)",
        "Remove the @code { ... } block from ImageTile.razor",
        "Keep HTML/Razor markup and <style> block in ImageTile.razor",
        "Build passes",
        "All 73 E2E tests pass (dotnet test tests/NowThenNext.Tests.E2E)"
      ],
      "priority": 5,
      "passes": false,
      "notes": "Component in Components/ directory - namespace is NowThenNext.Components. ~37 lines of @code. Has [Parameter] EventCallback properties."
    }
  ]
}
