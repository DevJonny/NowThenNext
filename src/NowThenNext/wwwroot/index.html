<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NowThenNext</title>
    <base href="/" />
    <link rel="preload" id="webassembly" />
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Calm color palette for children with SEN
                        'calm': {
                            // Soft teal primary - soothing and calming
                            'primary': '#5B9A9A',
                            'primary-dark': '#4A8585',
                            'primary-light': '#7FB5B5',
                            // Muted green accent - gentle and natural
                            'accent': '#7BA893',
                            'accent-dark': '#6A9480',
                            'accent-light': '#9BBFAE',
                            // Warm off-white background - soft and welcoming
                            'bg': '#F9F7F3',
                            'bg-alt': '#F0EDE8',
                            // Dark gray text - readable but not harsh
                            'text': '#3D4852',
                            'text-light': '#606F7B',
                            // Calm warning color - muted amber (not harsh red/yellow)
                            'warning': '#D4A06A',
                            'warning-dark': '#C08B55',
                            // Success - muted green
                            'success': '#6B9A7D',
                            // Border/divider - subtle gray
                            'border': '#E2DFD8'
                        }
                    },
                    fontFamily: {
                        // Rounded, friendly sans-serif fonts
                        'sans': ['Nunito', 'Quicksand', 'Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif']
                    },
                    fontSize: {
                        // Minimum 18px body text for accessibility
                        'base': ['1.125rem', { lineHeight: '1.75rem' }], // 18px
                        'lg': ['1.25rem', { lineHeight: '1.875rem' }],   // 20px
                        'xl': ['1.5rem', { lineHeight: '2rem' }],        // 24px
                        '2xl': ['1.875rem', { lineHeight: '2.25rem' }],  // 30px
                        '3xl': ['2.25rem', { lineHeight: '2.5rem' }]     // 36px
                    },
                    spacing: {
                        // Touch-friendly minimum tap target size
                        'tap': '3rem' // 48px
                    },
                    minHeight: {
                        'tap': '3rem' // 48px minimum tap target
                    },
                    minWidth: {
                        'tap': '3rem' // 48px minimum tap target
                    },
                    borderRadius: {
                        'calm': '0.75rem' // Soft, rounded corners
                    }
                }
            }
        }
    </script>
    <!-- Google Fonts - Nunito (rounded, friendly) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="NowThenNext.styles.css" rel="stylesheet" />
    <script type="importmap"></script>
</head>

<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="." class="reload">Reload</a>
        <span class="dismiss">ðŸ—™</span>
    </div>
    <script src="_framework/blazor.webassembly#[.{fingerprint}].js"></script>
    <script>
        // Image compression utility for NowThenNext
        window.compressImage = function(dataUrl, maxDimension, quality) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = function() {
                    // Calculate new dimensions maintaining aspect ratio
                    let width = img.width;
                    let height = img.height;

                    if (width > maxDimension || height > maxDimension) {
                        if (width > height) {
                            height = Math.round((height * maxDimension) / width);
                            width = maxDimension;
                        } else {
                            width = Math.round((width * maxDimension) / height);
                            height = maxDimension;
                        }
                    }

                    // Create canvas and draw resized image
                    const canvas = document.createElement('canvas');
                    canvas.width = width;
                    canvas.height = height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0, width, height);

                    // Convert to JPEG with specified quality
                    const compressedDataUrl = canvas.toDataURL('image/jpeg', quality);
                    resolve(compressedDataUrl);
                };
                img.onerror = function() {
                    reject(new Error('Failed to load image for compression'));
                };
                img.src = dataUrl;
            });
        };
    </script>
</body>

</html>
